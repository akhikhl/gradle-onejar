buildscript {
  apply plugin: 'maven'

  // It is not recommended to put infrastructure-specific repositories here.
  // Better place for this would be "$HOME/.gradle/init.d/"
  repositories {
    mavenLocal()
    mavenCentral()
  }

  dependencies {
    classpath 'org.akhikhl.gradle-onejar:gradle-onejar:0.0.3'
  }
}

apply plugin: 'base' // add "clean" task to the root project.

ext {
  generateSources = true
  generateJavadoc = true
  mavenGroupId = 'org.akhikhl.gradle-onejar'
  mavenVersion = '0.0.3'  
}

subprojects {
  apply from: rootProject.file('common.gradle')
}

task('buildSrc_uploadArchives', type: GradleBuild) { task ->
  dir = 'buildSrc'
  tasks = [ 'uploadArchives' ]
}

uploadArchives.dependsOn buildSrc_uploadArchives

task('buildSrc_clean', type: GradleBuild) { task ->
  dir = 'buildSrc'
  tasks = [ 'clean' ]
}

clean.finalizedBy buildSrc_clean
